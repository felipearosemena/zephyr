
<div id="cart-view" class="cart-view" v-bind:class="{ 'is-active' : isActive, 'is-loading' : isLoading }">

  <div class="container">
    <div v-if="isLoading">
      <div class="spinner"></div>
    </div>
    <div v-else>
      <div class="text-right">
        <div class="cart-view__count cart-link">
          cart
          <span v-html="cart.count"></span>
        </div>
      </div>

      <div v-if="cart.count">
        <ul class="cart-items mt-2 list-plain">
          <li v-for="(item, key) in cart.contents" v-if="products[item.product_id]" class="cart-item">
            <div class="grid mb-1">
              <button v-on:click="remove(key)" class="btn-icon">
                <i class="icon-close"></i>
              </button>
              <div class="grid__item w-3-12">
                <thumbnail :image="products[item.product_id].thumbnail" size="card" />
              </div>
              <div class="grid__item w-9-12">
                <h4 class="label mb-25">
                  <router-link :to="products[item.product_id].path">
                    {{ products[item.product_id].title.rendered }}
                  </router-link>
                </h4>
                <div class="flex justify-between small-text">
                  <span>
                    <span v-if="item.variation && item.variation.attribute_pa_size">
                      Size: {{ item.variation.attribute_pa_size }} <br/>
                    </span>

                    <span>
                      Qty
                    </span>
                    <select v-on:change="setQuantity(key, $event)" :value=" item.quantity">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                    </select>
                  </span>
                  <span class="align-bottom">
                    {{ item.line_subtotal | format-currency }}
                  </span>
                </div>
              </div>
            </div>
          </li>
        </ul>

        <hr>

        <p class="lead weight-bold flex justify-between" v-if="cart">
          <span>Subtotal:</span> <span>{{ cart.subtotal | format-currency }}</span>
        </p>

        <div class="mt-2">
          <a href="/checkout" v-if="!isCheckout" v-on:click.stop class="btn btn--body">Go To Checkout</a>
        </div>

      </div>
      <div v-else>
      <p class="lead mb-05">You cart is empty</p>

      <p>
        <a href="/shop" class="btn">
          <span v-on:click="toggleCart">
            Go to shop
          </span>
        </a>
      </p>
    </div>
    </div>

    <div class="cart-view__close" v-on:click="toggleCart"></div>
  </div>


</div>
